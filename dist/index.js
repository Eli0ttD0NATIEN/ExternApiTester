"use strict";function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}require("@babel/polyfill");

var Motor = require('./motor');
var commandLineArgs = require('command-line-args');
var fs = require('fs');var _require =
require('console'),Console = _require.Console;


var defaultCfg = {
  timeout: 1000,
  report: 'cli', // ou tc (team city)
  baseUrl: 'http://vm-dev-central4.omnitech.security/SealWebMvc/ExternalApi',
  testFolder: 'test/',
  serieFolder: 'test/series/',
  stepFolder: 'test/step/' };var


App =
function App(options) {var _this = this;_classCallCheck(this, App);_defineProperty(this, "validConfig",









  function () {
    _this.config.testFolder = _this.config.testFolder.replace(/\\/g, '/');
    _this.config.testFolder.slice(-1) != '/' ? _this.config.testFolder += '/' : '';
    return _this.folderExist() && _this.serieFolderExist() && _this.stepFolderExist() && _this.knownReport() && _this.validAuthStr();
  });_defineProperty(this, "folderExist",
  function () {
    if (fs.existsSync(_this.config.testFolder)) {
      return true;
    } else {
      console.log("Folder don't exists ! Please select a valid folder !");
      return false;
    }
  });_defineProperty(this, "knownReport",
  function () {
    var report = _this.config.report === 'cli' || _this.config.report === 'tc' ? true : false;
    if (!report) console.log("Reporter Unknown use cli or tc");
    return report;
  });_defineProperty(this, "serieFolderExist",
  function () {
    if (fs.existsSync(_this.config.serieFolder)) {
      return true;
    } else {
      console.log("Serie Folder is required can't start !");
      return false;
    }
  });_defineProperty(this, "stepFolderExist",
  function () {
    if (fs.existsSync(_this.config.stepFolder)) {
      return true;
    } else {
      console.log("Step Folder is required can't start !");
      return false;
    }
  });_defineProperty(this, "validAuthStr",
  function () {
    if ("auth" in _this.config) {
      var format = _this.config.auth.includes(":");
      if (!format) console.log("Auth string is in bad format referer to the help section !");
      return format;

    } else {
      console.log("Auth arg is required !");
      return false;
    }
  });if (options === 1 || "help" in options) {console.log(help());} else {this.config = Object.assign({}, defaultCfg, options);if (this.validConfig()) {this.testMotor = new Motor(this.config);}}};

function getArg() {
  try {
    var options = commandLineArgs([
    { name: 'timeout', alias: 't', type: Number },
    { name: 'report', alias: 'r', type: String },
    { name: 'baseUrl', alias: 'u', type: String },
    { name: 'testFolder', alias: 'f', type: String },
    { name: 'serieFolder', alias: 's', type: String },
    { name: 'stepFolder', alias: 'e', type: String },
    { name: 'auth', alias: 'a', type: String },
    { name: 'help', alias: 'h', type: String }]);

    return options;
  }
  catch (err) {
    return 1;
  }
}
function help() {
  return fs.readFileSync("helpFile.txt").toString('utf-8');
}
var app = new App(getArg());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiTW90b3IiLCJjb21tYW5kTGluZUFyZ3MiLCJmcyIsIkNvbnNvbGUiLCJkZWZhdWx0Q2ZnIiwidGltZW91dCIsInJlcG9ydCIsImJhc2VVcmwiLCJ0ZXN0Rm9sZGVyIiwic2VyaWVGb2xkZXIiLCJzdGVwRm9sZGVyIiwiQXBwIiwib3B0aW9ucyIsImNvbmZpZyIsInJlcGxhY2UiLCJzbGljZSIsImZvbGRlckV4aXN0Iiwic2VyaWVGb2xkZXJFeGlzdCIsInN0ZXBGb2xkZXJFeGlzdCIsImtub3duUmVwb3J0IiwidmFsaWRBdXRoU3RyIiwiZXhpc3RzU3luYyIsImNvbnNvbGUiLCJsb2ciLCJmb3JtYXQiLCJhdXRoIiwiaW5jbHVkZXMiLCJoZWxwIiwiT2JqZWN0IiwiYXNzaWduIiwidmFsaWRDb25maWciLCJ0ZXN0TW90b3IiLCJnZXRBcmciLCJuYW1lIiwiYWxpYXMiLCJ0eXBlIiwiTnVtYmVyIiwiU3RyaW5nIiwiZXJyIiwicmVhZEZpbGVTeW5jIiwidG9TdHJpbmciLCJhcHAiXSwibWFwcGluZ3MiOiI0V0FBQUEsT0FBTyxDQUFDLGlCQUFELENBQVA7O0FBRUEsSUFBTUMsS0FBSyxHQUFHRCxPQUFPLENBQUMsU0FBRCxDQUFyQjtBQUNBLElBQU1FLGVBQWUsR0FBR0YsT0FBTyxDQUFDLG1CQUFELENBQS9CO0FBQ0EsSUFBTUcsRUFBRSxHQUFHSCxPQUFPLENBQUMsSUFBRCxDQUFsQixDO0FBQ29CQSxPQUFPLENBQUMsU0FBRCxDLENBQW5CSSxPLFlBQUFBLE87OztBQUdSLElBQU1DLFVBQVUsR0FBRztBQUNmQyxFQUFBQSxPQUFPLEVBQUUsSUFETTtBQUVmQyxFQUFBQSxNQUFNLEVBQUUsS0FGTyxFQUVBO0FBQ2ZDLEVBQUFBLE9BQU8sRUFBRSxpRUFITTtBQUlmQyxFQUFBQSxVQUFVLEVBQUUsT0FKRztBQUtmQyxFQUFBQSxXQUFXLEVBQUUsY0FMRTtBQU1mQyxFQUFBQSxVQUFVLEVB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T0FBekMsQ0FBUDtBQUNIO0FBQ0QsSUFBSUMsR0FBRyxHQUFHLElBQUk5QixHQUFKLENBQVFxQixNQUFNLEVBQWQsQ0FBViIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoXCJAYmFiZWwvcG9seWZpbGxcIik7XG5cbmNvbnN0IE1vdG9yID0gcmVxdWlyZSgnLi9tb3RvcicpO1xuY29uc3QgY29tbWFuZExpbmVBcmdzID0gcmVxdWlyZSgnY29tbWFuZC1saW5lLWFyZ3MnKTtcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmNvbnN0IHsgQ29uc29sZSB9ID0gcmVxdWlyZSgnY29uc29sZScpO1xuXG5cbmNvbnN0IGRlZmF1bHRDZmcgPSB7XG4gICAgdGltZW91dDogMTAwMCxcbiAgICByZXBvcnQ6ICdjbGknLCAvLyBvdSB0YyAodGVhbSBjaXR5KVxuICAgIGJhc2VVcmw6ICdodHRwOi8vdm0tZGV2LWNlbnRyYWw0Lm9tbml0ZWNoLnNlY3VyaXR5L1NlYWxXZWJNdmMvRXh0ZXJuYWxBcGknLFxuICAgIHRlc3RGb2xkZXI6ICd0ZXN0LycsXG4gICAgc2VyaWVGb2xkZXI6ICd0ZXN0L3Nlcmllcy8nLFxuICAgIHN0ZXBGb2xkZXI6ICd0ZXN0L3N0ZXAvJ1xufVxuXG5jbGFzcyBBcHAge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpe1xuICAgICAgICBpZihvcHRpb25zID09PSAxIHx8IFwiaGVscFwiIGluIG9wdGlvbnMpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coaGVscCgpKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdENmZywgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZih0aGlzLnZhbGlkQ29uZmlnKCkpe1xuICAgICAgICAgICAgICAgIHRoaXMudGVzdE1vdG9yID0gbmV3IE1vdG9yKHRoaXMuY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB2YWxpZENvbmZpZyA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5jb25maWcudGVzdEZvbGRlciA9IHRoaXMuY29uZmlnLnRlc3RGb2xkZXIucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xuICAgICAgICAodGhpcy5jb25maWcudGVzdEZvbGRlci5zbGljZSgtMSkgIT0gJy8nKSA/IHRoaXMuY29uZmlnLnRlc3RGb2xkZXIgKz0gJy8nIDogJyc7XG4gICAgICAgIHJldHVybiB0aGlzLmZvbGRlckV4aXN0KCkgJiYgdGhpcy5zZXJpZUZvbGRlckV4aXN0KCkgJiYgdGhpcy5zdGVwRm9sZGVyRXhpc3QoKSAmJiB0aGlzLmtub3duUmVwb3J0KCkgJiYgdGhpcy52YWxpZEF1dGhTdHIoKTtcbiAgICB9XG4gICAgZm9sZGVyRXhpc3QgPSAoKSA9PiB7XG4gICAgICAgIGlmKGZzLmV4aXN0c1N5bmModGhpcy5jb25maWcudGVzdEZvbGRlcikpe1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJGb2xkZXIgZG9uJ3QgZXhpc3RzICEgUGxlYXNlIHNlbGVjdCBhIHZhbGlkIGZvbGRlciAhXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSBcbiAgICBrbm93blJlcG9ydCA9ICgpID0+IHtcbiAgICAgICAgbGV0IHJlcG9ydCA9ICh0aGlzLmNvbmZpZy5yZXBvcnQgPT09ICdjbGknIHx8IHRoaXMuY29uZmlnLnJlcG9ydCA9PT0gJ3RjJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIGlmKCFyZXBvcnQpIGNvbnNvbGUubG9nKFwiUmVwb3J0ZXIgVW5rbm93biB1c2UgY2xpIG9yIHRjXCIpXG4gICAgICAgIHJldHVybiByZXBvcnRcbiAgICB9XG4gICAgc2VyaWVGb2xkZXJFeGlzdCA9ICgpID0+IHtcbiAgICAgICAgaWYoZnMuZXhpc3RzU3luYyh0aGlzLmNvbmZpZy5zZXJpZUZvbGRlcikpe1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZXJpZSBGb2xkZXIgaXMgcmVxdWlyZWQgY2FuJ3Qgc3RhcnQgIVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSAgXG4gICAgfVxuICAgIHN0ZXBGb2xkZXJFeGlzdCA9ICgpID0+IHtcbiAgICAgICAgaWYoZnMuZXhpc3RzU3luYyh0aGlzLmNvbmZpZy5zdGVwRm9sZGVyKSl7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlN0ZXAgRm9sZGVyIGlzIHJlcXVpcmVkIGNhbid0IHN0YXJ0ICFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gIFxuICAgIH1cbiAgICB2YWxpZEF1dGhTdHIgPSAoKSA9PiB7ICBcbiAgICAgICAgaWYoXCJhdXRoXCIgaW4gdGhpcy5jb25maWcpe1xuICAgICAgICAgICAgbGV0IGZvcm1hdCA9IHRoaXMuY29uZmlnLmF1dGguaW5jbHVkZXMoXCI6XCIpO1xuICAgICAgICAgICAgaWYoIWZvcm1hdCkgY29uc29sZS5sb2coXCJBdXRoIHN0cmluZyBpcyBpbiBiYWQgZm9ybWF0IHJlZmVyZXIgdG8gdGhlIGhlbHAgc2VjdGlvbiAhXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcblxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXV0aCBhcmcgaXMgcmVxdWlyZWQgIVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGdldEFyZygpe1xuICAgIHRyeXtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGNvbW1hbmRMaW5lQXJncyhbXG4gICAgICAgICAgICB7bmFtZTogJ3RpbWVvdXQnLCBhbGlhczogJ3QnLCB0eXBlOiBOdW1iZXJ9LFxuICAgICAgICAgICAge25hbWU6ICdyZXBvcnQnLCBhbGlhczogJ3InLCAgdHlwZTogU3RyaW5nfSxcbiAgICAgICAgICAgIHtuYW1lOiAnYmFzZVVybCcsIGFsaWFzOiAndScsIHR5cGU6IFN0cmluZ30sXG4gICAgICAgICAgICB7bmFtZTogJ3Rlc3RGb2xkZXInLCBhbGlhczogJ2YnLCB0eXBlOiBTdHJpbmd9LFxuICAgICAgICAgICAge25hbWU6ICdzZXJpZUZvbGRlcicsIGFsaWFzOiAncycsIHR5cGU6IFN0cmluZ30sXG4gICAgICAgICAgICB7bmFtZTogJ3N0ZXBGb2xkZXInLCBhbGlhczogJ2UnLCB0eXBlOiBTdHJpbmd9LFxuICAgICAgICAgICAge25hbWU6ICdhdXRoJywgYWxpYXM6ICdhJywgdHlwZTogU3RyaW5nfSxcbiAgICAgICAgICAgIHtuYW1lOiAnaGVscCcsIGFsaWFzOiAnaCcsIHR5cGU6IFN0cmluZ30sXG4gICAgICAgIF0pO1xuICAgICAgICByZXR1cm4gb3B0aW9uc1xuICAgIH1cbiAgICBjYXRjaChlcnIpe1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG59XG5mdW5jdGlvbiBoZWxwKCl7XG4gICAgcmV0dXJuIGZzLnJlYWRGaWxlU3luYyhcImhlbHBGaWxlLnR4dFwiKS50b1N0cmluZygndXRmLTgnKTtcbn1cbmxldCBhcHAgPSBuZXcgQXBwKGdldEFyZygpKTtcbiJdfQ==